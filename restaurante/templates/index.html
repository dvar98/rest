<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="stylesheet" href="{% static 'restaurante/styles.css' %}">
    <link rel="stylesheet" href="{% static 'restaurante/styles2.css' %}">
    <title>Bienvenido a Restaurante</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0&icon_names=chevron_left" />
</head>
<body>
    <div class="main">
        <div class="card shadow" id="card">
            <p class="title fadein">¿Qué deseas hacer?</p>

            <div class="registro">
                <div class="title-registro">
                    <p class="title-register" style="display: none;">Registro</p>
                </div>
                <div class="btn-registro">
                    <button class="special-btn" id="backButton" style="display: none;">
                        <span class="material-symbols-outlined">
                            chevron_left
                        </span>
                    </button> 
                </div>
            </div>

            <div class="login">
                <div class="title-login">
                    <p class="title-login-text" style="display: none;">Iniciar Sesión</p>
                </div>
            </div>

            <div class="btns">   
                <button class="btn" id="loginButton">Iniciar sesión</button>
                <button class="btn" id="registerButton">Registrarse</button>
            </div>

            <div class="form-container">
                <form id="registrationForm" style="display: none;">
                    <input class="input" type="text" id="fullName" placeholder="Nombre completo" required />
                    <input class="input" type="email" id="email" placeholder="Correo electrónico" required />
                    <input class="input" type="password" id="password" placeholder="Contraseña" required />
                    <input class="input" type="password" id="confirmPassword" placeholder="Repetir contraseña" required />
                    <button class='btn btna' type='submit'>Registrarse</button>
                </form>

                <form id="loginForm" style="display: none;">
                    <input class='input' type='email' id='loginEmail' placeholder='Correo electrónico' required />
                    <input class='input' type='password' id='loginPassword' placeholder='Contraseña' required />
                    <button class='btn btna' type='submit'>Iniciar sesión</button>
                </form>

                <form id='reservationForm' style='display: none;'>
                    <h3>Reserva una mesa</h3>
                    <input class='input' type='date' id='reservationDate' placeholder='Fecha de reserva' required />
                    <input class='input' type='time' id='reservationTime' placeholder='Hora de reserva' required />
                    <input class='input' type='number' id='numberOfPeople' placeholder='# de personas' required />
                    <button class='btn btna' type='submit'>Reservar mesa</button>
                </form>
            </div>

        </div>
    </div>

    <script>
        document.getElementById('registerButton').addEventListener('click', function() {
            const card = document.getElementById('card');
            card.classList.add('expanded');
            const title = card.querySelector('.title');
            const buttons = card.querySelector('.btns');
            const titleRegister = card.querySelector('.title-register');
            const backButton = card.querySelector('#backButton');
            const registrationForm = document.getElementById('registrationForm');
            const loginForm = document.getElementById('loginForm');
            const titleLogin = card.querySelector('.title-login-text');

            title.style.display = 'none';
            buttons.style.display = 'none';
            titleRegister.style.display = 'block';
            backButton.style.display = 'block';
            registrationForm.style.display = 'flex';
            loginForm.style.display = 'none';
            titleLogin.style.display = 'none';

            titleRegister.classList.add('fade-in');
            backButton.classList.add('fade-in');
            registrationForm.classList.add('fade-in');
        });

        document.getElementById('loginButton').addEventListener('click', function() {
            const card = document.getElementById('card');
            card.classList.add('expanded');
            const title = card.querySelector('.title');
            const buttons = card.querySelector('.btns');
            const backButton = card.querySelector('#backButton');
            const registrationForm = document.getElementById('registrationForm');
            const loginForm = document.getElementById('loginForm');

            title.style.display = 'none';
            buttons.style.display = 'none';
            backButton.style.display = 'block';
            loginForm.style.display = 'flex';
            registrationForm.style.display = 'none';

            const titleLogin = card.querySelector('.title-login-text');
            titleLogin.style.display = 'block';

            backButton.classList.add('fade-in');
            loginForm.classList.add('fade-in');
        });

        document.getElementById('loginForm').addEventListener('submit', function(event) {
           event.preventDefault();
           const email = document.getElementById('loginEmail').value;
           const password = document.getElementById('loginPassword').value;
           alert(`Iniciando sesión con ${email}`);
           const reservationForm = document.getElementById('reservationForm');
           reservationForm.style.display = 'flex';
           loginForm.style.display = 'none';
           const titleLogin = card.querySelector('.title-login-text');
           titleLogin.style.display = 'none';
        });

        document.getElementById('backButton').addEventListener('click', function() {
            const card = document.getElementById('card');
            card.classList.remove('expanded');
            const title = card.querySelector('.title');
            const buttons = card.querySelector('.btns');
            title.style.display = 'block';
            buttons.style.display = 'flex';
            this.style.display = 'none';
            document.getElementById('registrationForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'none';
            const titleRegister = card.querySelector('.title-register');
            titleRegister.style.display = 'none';
            const titleLogin = card.querySelector('.title-login-text');
            titleLogin.style.display = 'none';
            document.getElementById('reservationForm').style.display = 'none';
        });

        document.getElementById('registrationForm').addEventListener('submit', function(event) {
           event.preventDefault();
           const password = document.getElementById('password').value;
           const confirmPassword = document.getElementById('confirmPassword').value;
           if (password !== confirmPassword) {
               alert("Las contraseñas no coinciden.");
               return;
           }
           alert("Registro exitoso!");
        });
    </script>
</body>
</html>